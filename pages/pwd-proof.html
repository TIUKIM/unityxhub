<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Verify PWD Status – UnityXhub</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Reuse Global CSS -->
    <link rel="stylesheet" href="../css/style.css">
    <style>
        .pwd-proof-container {
            max-width: 800px;
            margin: 50px auto;
            padding: 30px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
        }

        .alert-warning {
            background: #fff3cd;
            color: #856404;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 0.95rem;
        }

        .upload-box {
            border: 2px dashed #ddd;
            padding: 20px;
            text-align: center;
            border-radius: 8px;
            cursor: pointer;
            background: #fafafa;
            margin: 15px 0;
        }

        .upload-box:hover {
            border-color: var(--primary);
        }

        .btn-primary {
            background: var(--secondary);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1.1rem;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>

    <!-- Header -->
    <header>
        <div class="header-container">
            <div class="logo-section">
                <div class="site-title">UnityXhub</div>
                <div class="slogan">PWD Verification</div>
            </div>
            <button class="btn btn-outline" onclick="history.back()">← Back</button>
        </div>
    </header>

    <main class="pwd-proof-container">
        <h2><i class="fas fa-accessible-icon"></i> Verify Your PWD Status</h2>
        <p>To qualify for 3% lifetime commission, please submit the following:</p>

        <div class="alert-warning">
            ⚠️ Your information will be encrypted and never shown publicly.<br>
            Only authorized staff can view your documents.
        </div>

        <!-- Terms Agreement -->
        <div class="form-group">
            <input type="checkbox" id="agreePWDTerms">
            <label for="agreePWDTerms">
                I have read and agree to the <a href="pwd-terms.html" target="_blank" style="color:var(--primary);">PWD Terms & Conditions</a>
            </label>
        </div>

        <!-- PWD ID Upload -->
        <div class="form-group">
            <label><strong>1. Government-Issued PWD ID</strong></label>
            <div class="upload-box">
                <i class="fas fa-id-card" style="font-size:2rem;"></i><br>
                Click to upload or drag and drop<br>
                <small>JPG, PNG, PDF (max 20MB)</small>
                <input type="file" accept=".jpg,.jpeg,.png,.pdf" style="display:none;">
            </div>
        </div>

        <!-- Selfie with ID -->
        <div class="form-group">
            <label><strong>2. Photo of You Holding Your PWD ID</strong></label>
            <div class="upload-box">
                <i class="fas fa-camera" style="font-size:2rem;"></i><br>
                Clear face and ID visible<br>
                <small>JPG, PNG, PDF (max 20MB)</small>
                <input type="file" accept=".jpg,.jpeg,.png,.pdf" style="display:none;">
            </div>
        </div>

        <!-- Submit Button -->
        <div style="margin-top:30px;text-align:center;">
            <button class="btn-primary" id="submitProofBtn" disabled>
                Submit for Review (2–3 Days)
            </button>
        </div>

        <p style="text-align:center; margin-top:15px; color:#666;">
            After submission, our team will review within 2–3 business days.<br>
            You’ll receive email confirmation once approved.
        </p>
    </main>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-column">
                <h3>UnityXhub</h3>
                <p>Built by Filipinos, for every Filipino who dares to rise.</p>
            </div>
        </div>
        <div class="copyright">
            &copy; 2025 UnityXhub. All rights reserved.
        </div>
    </footer>

    <script>
        // Enable Submit Only If T&C Checked
        document.getElementById('agreePWDTerms').addEventListener('change', function () {
            document.getElementById('submitProofBtn').disabled = !this.checked;
        });

        // Simulate File Upload & Save to localStorage
        document.getElementById('submitProofBtn').addEventListener('click', function () {
            const userId = localStorage.getItem('currentUserId'); // Assume logged in
            if (!userId) {
                alert("Please sign in first.");
                return;
            }

            const proofData = {
                userId,
                submittedAt: new Date().toISOString(),
                status: 'pending',
                documents: {
                    pwdID: 'uploaded', // In real app: file URL
                    selfieWithID: 'uploaded'
                }
            };

            // Save to "database" (localStorage for now)
            let pwdApplications = JSON.parse(localStorage.getItem('unityxhub_pwd_applications') || '[]');
            pwdApplications.push(proofData);
            localStorage.setItem('unityxhub_pwd_applications', JSON.stringify(pwdApplications));

            // Update seller profile
            let sellers = JSON.parse(localStorage.getItem('unityxhub_sellers') || '[]');
            const sellerIndex = sellers.findIndex(s => s.id === userId);
            if (sellerIndex > -1) {
                sellers[sellerIndex].isPWD = 'pending';
                sellers[sellerIndex].commissionRate = 0.03; // Apply rate early
                localStorage.setItem('unityxhub_sellers', JSON.stringify(sellers));
            }

            // Success
            alert("Thank you! Your PWD verification has been submitted.\nWe’ll notify you within 2–3 business days.");
            window.location.href = '../shopping.html'; // Go back to shopping
        });
    </script>
</body>
</html>