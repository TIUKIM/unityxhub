<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Your Cart – UnityXhub</title>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Reuse Global CSS -->
    <link rel="stylesheet" href="../../css/style.css">

    <style>
        /* Cart Table */
        .cart-table {
            margin: 20px 0;
            overflow-x: auto;
        }

		/* Order Status Tabs */
		.order-status-tabs {
			display: flex;
			gap: 10px;
			margin: 20px 0;
			overflow-x: auto;
			padding-bottom: 5px;
			scrollbar-width: none;
		}

		.order-status-tabs::-webkit-scrollbar {
			display: none;
		}

		.tab {
			padding: 10px 16px;
			background: #f0f0f0;
			border-radius: 30px;
			font-size: 0.95rem;
			color: #555;
			white-nowrap: nowrap;
			transition: var(--transition);
			cursor: pointer;
		}

		.tab:hover, .tab.active {
			background: var(--primary);
			color: white;
		}

		.status-badge {
			padding: 5px 10px;
			border-radius: 20px;
			font-size: 0.8rem;
			font-weight: 600;
		}

		.status-to-pay { background: #ffeb3b; color: #555; }
		.status-to-ship { background: #2196f3; color: white; }
		.status-to-receive { background: #ff9800; color: white; }
		.status-completed { background: #4caf50; color: white; }
		.status-cancelled { background: #f44336; color: white; }
		.status-return { background: #9c27b0; color: white; }

		/* Actions Button */
		.action-btn {
			padding: 6px 12px;
			border: none;
			border-radius: 6px;
			font-size: 0.9rem;
			cursor: pointer;
			transition: var(--transition);
		}

		.btn-track { background: var(--primary); color: white; }
		.btn-return { background: #d32f2f; color: white; }
		.btn-review { background: #4caf50; color: white; }
        }
		
		.cart-table table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .cart-table th {
            padding: 15px;
            text-align: left;
            background: #f8f9fa;
            color: var(--dark);
            font-weight: 600;
            border-bottom: 1px solid var(--gray);
        }

        .cart-table td {
            padding: 15px;
            border-bottom: 1px solid #eee;
        }

        .product-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .product-img {
            width: 80px;
            height: 80px;
            background: #f5f5f5;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-size: 1.5rem;
            color: #999;
        }

        .product-details h3 {
            font-size: 1.1rem;
            margin: 0 0 5px;
            color: var(--dark);
        }

        .product-details p {
            margin: 0;
            color: #666;
            font-size: 0.95rem;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .qty-btn {
            width: 30px;
            height: 30px;
            border: 1px solid var(--gray);
            background: white;
            border-radius: 6px;
            cursor: pointer;
            transition: var(--transition);
        }

        .qty-btn:hover {
            background: #f0f0f0;
            border-color: var(--primary);
        }

        .quantity-input {
            width: 50px;
            text-align: center;
            padding: 5px;
            border: 1px solid var(--gray);
            border-radius: 6px;
        }

        .remove-btn {
            background: none;
            border: none;
            color: #d32f2f;
            cursor: pointer;
            font-size: 1.2rem;
            transition: var(--transition);
        }

        .remove-btn:hover {
            color: #b71c1c;
        }

        /* Order Summary */
        .order-summary {
            max-width: 400px;
            margin-left: auto;
            margin-top: 20px;
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px dashed #ddd;
            font-size: 1.1rem;
        }

        .summary-total {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary);
            display: flex;
            justify-content: space-between;
            padding: 15px 0;
            margin-top: 10px;
        }

        .secure-checkout {
            text-align: center;
            margin-top: 15px;
            color: #666;
            font-size: 0.95rem;
        }

        .secure-checkout i {
            color: var(--success);
            margin-right: 5px;
        }
    </style>
</head>
<body>

    <!-- Header -->
    <header>
        <div class="header-container">
            <div class="logo-section">
                <div class="site-title">UnityXhub</div>
                <div class="slogan">Your Cart</div>
            </div>
            <div class="search-bar">
                <input type="text" placeholder="Search products...">
                <div class="search-icon">
                    <i class="fas fa-search"></i>
                </div>
            </div>
            <div class="auth-buttons">
                <button class="btn btn-outline" id="signInBtn">
                    <i class="fas fa-user"></i> Sign In
                </button>
            </div>
            <div class="hamburger" id="hamburger">
                <i class="fas fa-bars"></i>
            </div>
        </div>
    </header>

    <!-- Navigation Tabs -->
    <div class="nav-tabs">
        <div class="tabs-container">
            <a href="../../index.html"><i class="fas fa-home"></i> Home</a>
            <a href="../seller/shopping.html"><i class="fas fa-shopping-cart"></i> Shopping</a>
            <a href="#" class="active"><i class="fas fa-shopping-cart"></i> Cart</a>
        </div>
    </div>

    <!-- Main Content -->
    <main>
		<h2 class="section-title"><i class="fas fa-shopping-cart"></i> Your Orders</h2>

		<!-- Order Status Tabs -->
		<div class="order-status-tabs">
			<a href="#" class="tab active" data-status="all">All Products</a>
			<a href="#" class="tab" data-status="to-pay">To Pay</a>
			<a href="#" class="tab" data-status="to-ship">To Ship</a>
			<a href="#" class="tab" data-status="to-receive">To Receive</a>
			<a href="#" class="tab" data-status="completed">Completed</a>
			<a href="#" class="tab" data-status="cancelled">Cancelled</a>
		</div>

		<!-- Cart Table -->
		<div class="cart-table">
			<table>
				<thead>
					<tr>
						<th>Product</th>
						<th>Unit Price</th>
						<th>Quantity</th>
						<th>Total</th>
						<th>Status</th>
						<th>Actions</th>
					</tr>
				</thead>
				<tbody id="cartItems">
					<!-- Filled by JS with status badges -->
				</tbody>
			</table>
		</div>

		<!-- Order Summary (only shown for "To Pay" items) -->
		<div class="order-summary" id="orderSummary">
			<h3>Order Summary</h3>
			<div class="summary-row">
				<span>Subtotal (<span id="itemCount">0</span> items)</span>
				<span>$<span id="subtotal">0.00</span></span>
			</div>
			<div class="summary-row">
				<span>Shipping</span>
				<span>Free</span>
			</div>
			<div class="summary-total">
				<strong>Total</strong>
				<strong>$<span id="total">0.00</span></strong>
			</div>

			<!-- Disclaimer Box -->
			<div class="highlight-box" style="text-align:center; margin:20px 0; font-size:0.95rem; background:#fff3cd; padding:15px; border-radius:8px; color:#856404;">
				By proceeding, you acknowledge that UnityXhub is a platform only.<br>
				We are not liable for transactions. 
				<a href="../../disclaimer.html" style="color:var(--primary); text-decoration:underline;">Read full disclaimer</a>.
			</div>

			<!-- Proceed to Checkout Button -->
			<button class="btn btn-primary" style="width: 100%; padding: 12px; font-size: 1.1rem;" onclick="proceedToCheckout()">
				Proceed to Checkout
			</button>

			<p class="secure-checkout">
				<i class="fas fa-lock"></i> Secure Checkout
			</p>
		</div>
	</main>

    <!-- Sign In Modal -->
    <div class="modal" id="signInModal">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close-modal" id="closeModal">&times;</button>
                <h2>Sign In to UnityXhub</h2>
            </div>
            <div class="modal-body">
                <div class="social-login">
                    <button class="social-btn google-btn">
                        <i class="fab fa-google"></i> Sign in with Google
                    </button>
                    <button class="social-btn facebook-btn">
                        <i class="fab fa-facebook-f"></i> Sign in with Facebook
                    </button>
                </div>
                <div class="divider">or sign in with email</div>
                <div class="form-group">
                    <label for="email">Email or Mobile</label>
                    <input type="text" id="email" class="form-control" placeholder="Enter email or number">
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" class="form-control" placeholder="Enter password">
                </div>
                <button class="btn btn-primary" style="width:100%; padding:12px;">Sign In</button>
            </div>
        </div>
    </div>

    <!-- Floating Support Chat Widget -->
    <div id="supportChatWidget">
        <button id="chatToggle" class="chat-toggle">
            <i class="fas fa-comments"></i>
        </button>
        <div class="chat-box" id="chatBox">
            <div class="chat-header">
                <div class="chat-title">
                    <i class="fas fa-robot"></i> UnityXhub Assistant
                </div>
                <button id="chatMinimize" class="chat-minimize">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="chat-body" id="chatBody">
                <div class="message bot">
                    Need help with your cart?<br>
                    Ask me about:
                    <ul style="margin:10px 0; padding-left:20px;">
                        <li>Shipping cost</li>
                        <li>Return policy</li>
                        <li>Payment methods</li>
                    </ul>
                </div>
            </div>
            <div class="chat-input-section">
                <textarea id="userMessageInput" placeholder="Type your message..." rows="2"></textarea>
                <button onclick="sendUserMessage()" class="send-btn">Send</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <!-- Column 1: About UnityXhub -->
            <div class="footer-column">
                <h3>UnityXhub</h3>
                <p>Your one-stop digital ecosystem for shopping, jobs, freelancers, and community connections. Built by Filipinos for the global economy.</p>
                <div class="payment-methods">
                    <div class="payment-method">Visa</div>
                    <div class="payment-method">MC</div>
                    <div class="payment-method">PayPal</div>
                    <div class="payment-method">GCash</div>
                    <div class="payment-method">Bank</div>
                </div>
            </div>

            <!-- Column 2: Quick Links -->
            <div class="footer-column">
                <h3>Quick Links</h3>
                <ul class="footer-links">
                    <li><a href="../../index.html"><i class="fas fa-chevron-right"></i> Home</a></li>
                    <li><a href="../../pages/seller/shopping.html"><i class="fas fa-chevron-right"></i> Continue Shopping</a></li>
                    <li><a href="../../pages/seller-agreement.html"><i class="fas fa-chevron-right"></i> Seller Agreement</a></li>
					<li><a href="../../pages/buyer-agreement.html"><i class="fas fa-chevron-right"></i> Buyer Agreement</a></li>
                    <li><a href="../../pages/return-policy.html"><i class="fas fa-chevron-right"></i> Return & Refund Policy</a></li>
                </ul>
            </div>

            <!-- Column 3: Support -->
            <div class="footer-column">
                <h3>Support</h3>
                <ul class="footer-links">
                    <li><a href="../../pages/help-center.html"><i class="fas fa-chevron-right"></i> FAQ</a></li>
                    <li><a href="../../contact.html"><i class="fas fa-chevron-right"></i> Contact Us</a></li>
                    <li><a href="../../pages/buyer-protection.html"><i class="fas fa-chevron-right"></i> Buyer Protection</a></li>
                    <li><a href="../../report-issue.html"><i class="fas fa-chevron-right"></i> Report an Issue</a></li>
                    <li><a href="../../safety-tips.html"><i class="fas fa-chevron-right"></i> Safety Tips</a></li>
                </ul>
            </div>

            <!-- Column 4: Legal -->
            <div class="footer-column">
                <h3>Legal</h3>
                <ul class="footer-links">
                    <li><a href="../../pages/about.html"><i class="fas fa-chevron-right"></i> About Us</a></li>
                    <li><a href="../../pages/terms-of-service.html"><i class="fas fa-chevron-right"></i> Terms of Service</a></li>
                    <li><a href="../../pages/privacy-policy.html"><i class="fas fa-chevron-right"></i> Privacy Policy</a></li>
                    <li><a href="../../pages/cookies-policy.html"><i class="fas fa-chevron-right"></i> Cookie Policy</a></li>
                    <li><a href="../../pages/disclaimer.html"><i class="fas fa-chevron-right"></i> Platform Disclaimer</a></li>
                </ul>
            </div>
        </div>
        <div class="copyright">
            &copy; 2025 UnityXhub. All rights reserved.
        </div>
    </footer>

    <!-- Cart Notification -->
    <div class="cart-notification" id="cartNotification">
        <i class="fas fa-check-circle"></i>
        <span>Item added to cart!</span>
    </div>

    <script src="../../js/cart.js"></script>
	<script src="../../js/main.js"></script>
<script>
    // Sample cart data with status
    const sampleCart = [
        { id: '1', name: 'iPhone 15', price: 699, qty: 1, status: 'to-pay', image: 'https://via.placeholder.com/80?text=iPhone' },
        { id: '2', name: 'AirPods Pro', price: 199, qty: 1, status: 'to-ship', image: 'https://via.placeholder.com/80?text=AirPods' },
        { id: '3', name: 'Smart Watch', price: 79, qty: 1, status: 'to-receive', image: 'https://via.placeholder.com/80?text=Watch' },
        { id: '4', name: 'USB Cable', price: 15, qty: 2, status: 'completed', image: 'https://via.placeholder.com/80?text=Cable' }
    ];

    function renderCart(status = 'all') {
        const tbody = document.getElementById('cartItems');
        const filtered = status === 'all' ? sampleCart : sampleCart.filter(item => item.status === status);

        tbody.innerHTML = '';
        let total = 0;

        filtered.forEach(item => {
            const row = document.createElement('tr');

            const amount = item.price * item.qty;
            total += amount;

            row.innerHTML = `
                <td>
                    <div class="product-info">
                        <div class="product-img"><img src="${item.image}" alt="${item.name}"></div>
                        <div class="product-details">
                            <h3>${item.name}</h3>
                            <p>ID: ${item.id}</p>
                        </div>
                    </div>
                </td>
                <td>$${item.price}</td>
                <td>${item.qty}</td>
                <td>$${amount.toFixed(2)}</td>
                <td><span class="status-badge status-${item.status}">${item.status.replace('-', ' ')}</span></td>
                <td>
                    ${item.status === 'to-pay' ? 
                        `<button class="action-btn btn-track" onclick="window.location.href='pages/order/to-pay.html'">Pay Now</button>` :
                      item.status === 'to-ship' ?
                        `<button class="action-btn btn-track" onclick="window.location.href='pages/order/to-ship.html'">Track</button>` :
                      item.status === 'to-receive' ?
                        `<button class="action-btn btn-review" onclick="confirmReceive('${item.id}')">Received</button>` :
                      item.status === 'completed' ?
                        `<small>✔️ Delivered</small>` :
                      `<small>❌ Cancelled</small>`
                    }
                </td>
            `;
            tbody.appendChild(row);
        });

        // Update summary only if "To Pay" items exist
        if (status === 'all' || status === 'to-pay') {
            document.getElementById('itemCount').textContent = filtered.length;
            document.getElementById('subtotal').textContent = total.toFixed(2);
            document.getElementById('total').textContent = total.toFixed(2);
            document.getElementById('orderSummary').style.display = 'block';
        } else {
            document.getElementById('orderSummary').style.display = 'none';
        }
    }

    // Tab Click
    document.querySelectorAll('.tab').forEach(tab => {
        tab.addEventListener('click', (e) => {
            e.preventDefault();
            document.querySelector('.tab.active').classList.remove('active');
            tab.classList.add('active');
            renderCart(tab.dataset.status);
        });
    });

    // Confirm Received
    window.confirmReceive = function(id) {
        if (confirm("Have you received this item?")) {
            alert("✅ Thank you! This order is now complete.");
            // Update status logic here
        }
    };

    // Proceed to checkout
    window.proceedToCheckout = function() {
        const cart = JSON.parse(localStorage.getItem('unityxhub_cart')) || [];
        if (cart.length === 0) {
            alert("🛒 Your cart is empty. Add some items first!");
            return;
        }
        window.location.href = "pages/order/to-pay.html";
    };

    // Initial Render
    document.addEventListener('DOMContentLoaded', () => {
        cart.renderCartItems(); // From cart.js
        renderCart('all'); // Custom render
    });
</script>